## README.md

# 🦊 AI 기반 디지털 신뢰 지수 (Firefox 확장 프로그램)

이 프로젝트는 Firefox 브라우저 확장 프로그램으로, 사용자가 방문하는 웹페이지(주로 네이버 뉴스 기사)의 **신뢰도 점수**와 **언론사의 정치적 성향**을 AI(Gemini API)를 활용하여 분석하고 시각적으로 표시합니다.

## ⚠️ 보안 경고 (매우 중요)

**이 확장 프로그램은 API 키를 브라우저의 로컬 저장소(`storage.local`)에 직접 저장하는 방식을 사용합니다.** 이는 **API 키 유출에 취약합니다.**
---

## ✨ 주요 기능

1.  **디지털 신뢰 점수:** Gemini API가 기사 텍스트의 논리적 일관성, 주장 명확성 등을 분석하여 **0점에서 100점 사이의 신뢰 점수**를 산출합니다.
2.  **언론사 성향 분류:** 미리 정의된 데이터베이스를 기반으로 언론사의 **정치적 성향** (진보/중도/보수 등)을 표시합니다.
3.  **DB 미등록 언론사 추론:** 데이터베이스에 없는 언론사(예: 새로운 인터넷 언론사, 일부 방송사)의 경우, Gemini에게 **성향 추론**을 요청합니다.
4.  **시각적 피드백:** 팝업창을 통해 신뢰도 점수, 언론사 성향, 분석 근거를 즉시 제공합니다.

---

## 🚀 개발 환경 및 설치

### 1. 전제 조건

*   Firefox 브라우저
*   Google Gemini API Key (API Key를 발급받아야 합니다.)

### 2. 프로젝트 설정

프로젝트 폴더에 아래의 파일들을 구성해야 합니다.

| 파일명 | 설명 |
| :--- | :--- |
| `manifest.json` | 확장 프로그램 설정 파일 (권한, 스크립트 지정) |
| `bias_db.js` | 언론사 성향 기준 데이터베이스 파일 |
| `content.js` | 네이버 뉴스 페이지에서 텍스트를 추출하는 스크립트 |
| `popup.html` / `popup.js` | 사용자가 API 키를 입력하고 결과를 보는 UI 및 로직 |
| `background.js` | Gemini API 호출 및 메인 로직 처리 (DB 매칭, 예외 처리) |
| `icons/icon-48.png` | 확장 프로그램 아이콘 이미지 |

### 3. Firefox에 설치 및 API 키 등록

1.  Firefox를 실행하고 주소창에 **`about:debugging`**을 입력합니다.
2.  왼쪽 메뉴에서 **'이 Firefox'**를 선택합니다.
3.  **'임시로 확장 기능 로드...'** 버튼을 클릭하고, 프로젝트 폴더를 선택합니다.
4.  **API 키 입력:** 확장 프로그램 아이콘을 클릭하여 팝업을 엽니다.
5.  **Gemini API Key**를 입력하고 **'키 저장 및 분석 시작'** 버튼을 클릭합니다. (이 과정을 통해 키가 브라우저에 저장됩니다.)
6.  키 저장이 완료되면, **`background.js`를 'Reload'** 합니다.

### 4. 사용 방법

1.  네이버 뉴스 기사 페이지(`https://news.naver.com/` 또는 `https://n.news.naver.com/`등)로 이동합니다.
2.  확장 프로그램 아이콘을 클릭하여 신뢰도 점수와 분석 결과를 확인합니다.

---

## 🛠️ 기술 스택 및 참고 사항

*   **프론트엔드:** HTML, CSS, JavaScript (WebExtensions API)
*   **백엔드 (AI):** Google Gemini API (REST API 호출 방식)
*   **API 호출 방식:** `fetch` API를 사용하여 RESTful 요청을 보내며, **API 키는 요청 헤더(`x-goog-api-key`)로 전달**됩니다.
*   **오류 처리:** API 호출 실패나 JSON 파싱 오류 발생 시, **콘솔에 로그를 남기고** 사용자에게는 안전한 기본값과 오류 메시지를 표시하도록 구현되어 있습니다.

---

**개발자 노트:**
*   API 키를 직접 저장하는 방식은 보안에 취약하므로, **실제 서비스 시에는 반드시 별도의 프록시 서버를 두어 키를 보호**해야 합니다.
*   Gemini의 응답 형식이 변경되면 `background.js` 내의 **마크다운 제거 로직**과 **JSON 파싱 로직**을 점검해야 할 수 있습니다.
*   기본으로 사용되는 Gemini 모델은 **`gemini-2.5-flash-lite`입니다.** 만약 다른 모델로 변경하고 싶다면 `background.js`의 `MODEL`을 수정해주세요.
*   Gemini가 판단시 사용하는 프롬프트를 바꾸고 싶다면 `background.js`의 `PROMPT_BASE`를 수정해주세요.